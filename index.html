<!DOCTYPE html>
<html>
<head>
  <title>Universal URL Downloader</title>
  <meta charset="UTF-8">
  <style>
    body { font-family: Arial; text-align:center; margin-top:50px; }
    input { width:60%; padding:10px; }
    button { padding:10px 20px; margin-top:10px; }
    video { margin-top:20px; width:70%; }
  </style>
</head>
<body>

<h2>Universal URL Downloader (Public URLs Only)</h2>

<input type="text" id="urlInput" placeholder="Enter any public URL (mp4/m3u8/mpd/etc)">
<br>
<button onclick="processUrl()">Load</button>

<div id="result"></div>

<script>
function processUrl() {
  const url = document.getElementById("urlInput").value;
  const proxyUrl = "/fetch?url=" + encodeURIComponent(url);

  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = "";

  if (url.endsWith(".mp4")) {
    resultDiv.innerHTML = `
      <video controls>
        <source src="${proxyUrl}" type="video/mp4">
      </video>
      <br><a href="${proxyUrl}" download>Download MP4</a>
    `;
  } else if (url.endsWith(".m3u8") || url.endsWith(".mpd")) {
    resultDiv.innerHTML = `
      <video controls src="${proxyUrl}"></video>
    `;
  } else {
    resultDiv.innerHTML = `
      <a href="${proxyUrl}" download>Download File</a>
    `;
  }
}
</script>

</body>
</html>
